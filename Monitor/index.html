<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto Hugo üíö - Monitor de Salinidad y Potasio</title>
    
    <!-- Tailwind CSS (Dise√±o) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js (Gr√°ficos) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Lucide Icons (Iconos) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        
        /* Animaciones personalizadas */
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .lcd-screen {
            background-color: #8ea87c;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
            border: 8px solid #7a8f6b;
            position: relative;
        }
        .lcd-glare {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 100%);
        }
    </style>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        emerald: { 50: '#ecfdf5', 100: '#d1fae5', 500: '#10b981', 600: '#059669', 700: '#047857', 900: '#064e3b' },
                        slate: { 800: '#1e293b', 900: '#0f172a' }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <!-- Logo -->
                <div class="flex items-center gap-2 cursor-pointer" onclick="switchTab('dashboard')">
                    <div class="bg-emerald-100 p-2 rounded-full">
                        <i data-lucide="activity" class="h-6 w-6 text-emerald-600"></i>
                    </div>
                    <span class="font-bold text-xl tracking-tight text-slate-800">
                        Proyecto Hugo<span class="text-emerald-500">üíö</span>
                    </span>
                </div>
                
                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-2">
                    <button onclick="switchTab('dashboard')" class="nav-btn px-3 py-2 rounded-md text-sm font-medium transition-colors text-emerald-700 bg-emerald-50" id="btn-dashboard">Monitor en Vivo</button>
                    <button onclick="switchTab('story')" class="nav-btn px-3 py-2 rounded-md text-sm font-medium transition-colors text-slate-600 hover:text-emerald-600 hover:bg-slate-50" id="btn-story">Historia</button>
                    <button onclick="switchTab('specs')" class="nav-btn px-3 py-2 rounded-md text-sm font-medium transition-colors text-slate-600 hover:text-emerald-600 hover:bg-slate-50" id="btn-specs">Especificaciones</button>
                </div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button onclick="toggleMobileMenu()" class="p-2 text-slate-600">
                        <i data-lucide="menu"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu Dropdown -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-b">
            <div class="px-4 pt-2 pb-4 space-y-1">
                <button onclick="switchTab('dashboard')" class="block w-full text-left px-3 py-2 rounded-md font-medium text-slate-700 hover:bg-emerald-50">Monitor</button>
                <button onclick="switchTab('story')" class="block w-full text-left px-3 py-2 rounded-md font-medium text-slate-700 hover:bg-emerald-50">Historia</button>
                <button onclick="switchTab('specs')" class="block w-full text-left px-3 py-2 rounded-md font-medium text-slate-700 hover:bg-emerald-50">Especificaciones</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-grow w-full">
        
        <!-- SECCI√ìN 1: DASHBOARD (Monitor) -->
        <div id="tab-dashboard" class="tab-content fade-in">
            <div class="text-center space-y-4 mb-10">
                <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800 border border-emerald-200">
                    Versi√≥n Septiembre 2025 - Experimental
                </span>
                <h1 class="text-3xl md:text-5xl font-extrabold text-slate-900 tracking-tight">
                    Monitor de <span id="mode-title" class="text-emerald-600 transition-colors duration-500">Salinidad</span>
                </h1>
                <p class="text-lg text-slate-600 max-w-2xl mx-auto">
                    Visualizaci√≥n en tiempo real de los sensores Arduino UNO.<br>
                    "A veces el amor tambi√©n se expresa con circuitos, sensores, pantallas y datos..."
                </p>
                
                <!-- Toggle Switch -->
                <div class="flex justify-center mt-6">
                    <div class="bg-slate-200 p-1 rounded-lg inline-flex relative">
                        <button onclick="setMode('salinity')" id="btn-mode-salinity" class="px-6 py-2 rounded-md text-sm font-medium transition-all duration-200 bg-white shadow-sm text-emerald-700">
                            Salinidad
                        </button>
                        <button onclick="setMode('potassium')" id="btn-mode-potassium" class="px-6 py-2 rounded-md text-sm font-medium transition-all duration-200 text-slate-500 hover:text-slate-700 flex items-center gap-2">
                            Potasio (K+) <span class="bg-amber-100 text-amber-700 text-[10px] px-1.5 py-0.5 rounded-full font-bold">NUEVO</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Dispositivo Virtual -->
                <div class="lg:col-span-1 space-y-6">
                    <div class="bg-slate-800 rounded-3xl p-6 shadow-2xl border-4 border-slate-700 relative overflow-hidden">
                        <!-- Tornillos -->
                        <div class="absolute top-3 left-3 w-3 h-3 rounded-full bg-slate-600 shadow-inner"></div>
                        <div class="absolute top-3 right-3 w-3 h-3 rounded-full bg-slate-600 shadow-inner"></div>
                        <div class="absolute bottom-3 left-3 w-3 h-3 rounded-full bg-slate-600 shadow-inner"></div>
                        <div class="absolute bottom-3 right-3 w-3 h-3 rounded-full bg-slate-600 shadow-inner"></div>

                        <div class="flex justify-between items-center mb-4 px-2">
                            <h3 class="text-slate-400 text-xs font-mono tracking-widest uppercase">Arduino UNO Output</h3>
                            <div class="flex gap-1">
                                <div class="w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"></div>
                                <div class="w-1.5 h-1.5 rounded-full bg-yellow-500"></div>
                            </div>
                        </div>
                        
                        <!-- Pantalla LCD -->
                        <div class="lcd-screen p-4 rounded-sm font-mono text-slate-900 mb-6">
                            <div class="lcd-glare absolute top-0 left-0 w-full h-full pointer-events-none"></div>
                            <div class="grid grid-cols-1 gap-1 opacity-90 text-sm md:text-base font-bold tracking-wider leading-relaxed relative z-10">
                                <div class="flex justify-between border-b border-slate-900/10 pb-1 mb-1">
                                    <span id="lcd-label">SALINIDAD:</span>
                                    <span id="lcd-value">0 uS</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>TEMP:</span>
                                    <span id="lcd-temp">0.0 C</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>pH:</span>
                                    <span id="lcd-ph">7.00</span>
                                </div>
                                <div class="mt-2 text-xs text-center animate-pulse bg-slate-900/10 py-0.5" id="lcd-status">
                                    >> SISTEMA OK <<
                                </div>
                            </div>
                        </div>

                        <!-- Tarjetas Sensores -->
                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-slate-800/50 p-4 rounded-xl border border-slate-700 flex items-center gap-4">
                                <div class="p-3 rounded-full bg-slate-900 text-rose-500">
                                    <i data-lucide="thermometer" class="w-4 h-4"></i>
                                </div>
                                <div>
                                    <p class="text-slate-400 text-xs uppercase tracking-wider">Temp</p>
                                    <p class="text-white font-mono text-lg font-bold" id="card-temp">0¬∞</p>
                                </div>
                            </div>
                            <div class="bg-slate-800/50 p-4 rounded-xl border border-slate-700 flex items-center gap-4">
                                <div class="p-3 rounded-full bg-slate-900 text-blue-400">
                                    <i data-lucide="droplets" class="w-4 h-4"></i>
                                </div>
                                <div>
                                    <p class="text-slate-400 text-xs uppercase tracking-wider">pH</p>
                                    <p class="text-white font-mono text-lg font-bold" id="card-ph">7.0</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gr√°fico -->
                <div class="lg:col-span-2 bg-white rounded-2xl shadow-sm border border-slate-200 p-6 flex flex-col justify-between">
                    <div>
                        <h3 class="text-lg font-semibold text-slate-800 mb-2 flex items-center gap-2">
                            <i data-lucide="activity" class="w-5 h-5 text-emerald-500"></i>
                            Historial de <span id="chart-title-text">Conductividad</span>
                        </h3>
                        <p class="text-sm text-slate-500 mb-6">
                            Datos simulados en tiempo real basados en la calibraci√≥n del sensor.
                        </p>
                        
                        <div class="h-72 w-full relative">
                            <canvas id="mainChart"></canvas>
                        </div>
                    </div>

                    <div class="mt-6 p-4 bg-slate-50 rounded-xl border border-slate-100">
                        <h4 class="font-medium text-sm text-slate-700 mb-2 flex items-center gap-2">
                            <i data-lucide="info" class="w-4 h-4 text-slate-400"></i>
                            Estado del An√°lisis
                        </h4>
                        <p class="text-sm text-slate-600" id="analysis-text">
                            La conductividad el√©ctrica muestra estabilidad. Compensaci√≥n de temperatura activa a 25¬∞C.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECCI√ìN 2: HISTORIA -->
        <div id="tab-story" class="tab-content hidden fade-in">
            <div class="max-w-4xl mx-auto space-y-16 py-8">
                <div class="text-center space-y-6">
                    <div class="inline-block p-4 rounded-full bg-rose-50 mb-4">
                        <i data-lucide="heart" class="w-12 h-12 text-rose-500 fill-current"></i>
                    </div>
                    <h2 class="text-3xl md:text-5xl font-bold text-slate-900 leading-tight">
                        "Este proyecto no naci√≥ en un laboratorio. <br/>
                        <span class="text-rose-500">Naci√≥ en mi coraz√≥n.</span>"
                    </h2>
                </div>

                <div class="relative wrap overflow-hidden p-4 h-full">
                    <!-- L√≠nea vertical -->
                    <div class="border-2-2 absolute border-opacity-20 border-emerald-500 h-full border left-1/2 hidden md:block"></div>
                    
                    <div class="space-y-8 md:space-y-12">
                        <!-- Item 1 -->
                        <div class="flex flex-col md:flex-row items-center justify-between w-full mb-8">
                            <div class="order-1 w-full md:w-5/12"></div>
                            <div class="z-20 flex items-center order-1 bg-emerald-500 shadow-xl w-8 h-8 rounded-full justify-center text-white text-sm mb-2 md:mb-0">‚ù§Ô∏è</div>
                            <div class="order-1 w-full md:w-5/12 px-6 py-4 rounded-lg shadow-md bg-white border-l-4 border-emerald-500">
                                <h3 class="mb-2 font-bold text-slate-800 text-lg">La Inspiraci√≥n: Agus Nicol√°s</h3>
                                <p class="text-sm leading-snug text-slate-600">
                                    No surgi√≥ de la t√©cnica, sino de un sentimiento profundo. Pens√© este dispositivo para quien fue el amor de mi vida. El miedo a que su salud estuviera en riesgo me impuls√≥ a crear.
                                </p>
                            </div>
                        </div>

                        <!-- Item 2 -->
                        <div class="flex flex-col md:flex-row-reverse items-center justify-between w-full mb-8">
                            <div class="order-1 w-full md:w-5/12"></div>
                            <div class="z-20 flex items-center order-1 bg-emerald-500 shadow-xl w-8 h-8 rounded-full justify-center text-white text-sm mb-2 md:mb-0">üïäÔ∏è</div>
                            <div class="order-1 w-full md:w-5/12 px-6 py-4 rounded-lg shadow-md bg-white border-l-4 md:border-l-0 md:border-r-4 border-emerald-500 md:text-right">
                                <h3 class="mb-2 font-bold text-slate-800 text-lg">La Memoria: Hugo Passucci</h3>
                                <p class="text-sm leading-snug text-slate-600">
                                    Dedicado a la memoria de Hugo, quien ten√≠a un solo ri√±√≥n. Su figura representa los valores que atraviesan este desarrollo: el cuidado, la voluntad y el compromiso con lo humano.
                                </p>
                            </div>
                        </div>

                        <!-- Item 3 -->
                        <div class="flex flex-col md:flex-row items-center justify-between w-full mb-8">
                            <div class="order-1 w-full md:w-5/12"></div>
                            <div class="z-20 flex items-center order-1 bg-emerald-500 shadow-xl w-8 h-8 rounded-full justify-center text-white text-sm mb-2 md:mb-0">üí°</div>
                            <div class="order-1 w-full md:w-5/12 px-6 py-4 rounded-lg shadow-md bg-white border-l-4 border-emerald-500">
                                <h3 class="mb-2 font-bold text-slate-800 text-lg">El Nacimiento del Proyecto</h3>
                                <p class="text-sm leading-snug text-slate-600">
                                    Con cables, Arduino y amor, cre√© este peque√±o dispositivo. Un intento de cuidar, de acompa√±ar. No s√© si alguna vez entender√° que esto naci√≥ por √©l, pero para m√≠ es sagrado.
                                </p>
                            </div>
                        </div>

                        <!-- Item 4 -->
                        <div class="flex flex-col md:flex-row-reverse items-center justify-between w-full mb-8">
                            <div class="order-1 w-full md:w-5/12"></div>
                            <div class="z-20 flex items-center order-1 bg-amber-500 shadow-xl w-8 h-8 rounded-full justify-center text-white text-sm mb-2 md:mb-0">‚ö°</div>
                            <div class="order-1 w-full md:w-5/12 px-6 py-4 rounded-lg shadow-md bg-white border-l-4 md:border-l-0 md:border-r-4 border-amber-500 md:text-right">
                                <h3 class="mb-2 font-bold text-slate-800 text-lg">Evoluci√≥n: Medidor de Potasio</h3>
                                <p class="text-sm leading-snug text-slate-600">
                                    Septiembre 2025. El proyecto crece. Se a√±ade la capacidad de medir Potasio (K+), vital para la salud renal. Porque a veces cuidar tambi√©n es crear, y medir tambi√©n es amar.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SECCI√ìN 3: ESPECIFICACIONES -->
        <div id="tab-specs" class="tab-content hidden fade-in">
            <div class="max-w-5xl mx-auto py-8">
                <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="p-8 border-b border-slate-100">
                        <h2 class="text-2xl font-bold text-slate-900 flex items-center gap-2">
                            <i data-lucide="cpu" class="text-emerald-500"></i>
                            Especificaciones T√©cnicas
                        </h2>
                           <p class="text-slate-500 mt-2">Detalles del hardware y software utilizado en el Proyecto Hugo.</p>
                    </div>
                    
                    <div class="grid md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-slate-100">
                        <div class="p-8 space-y-6">
                            <h3 class="font-semibold text-slate-800 mb-4">Hardware Base</h3>
                            <ul class="space-y-4">
                                <li class="flex items-start gap-3">
                                    <div class="bg-blue-100 p-1.5 rounded text-blue-600 mt-0.5"><i data-lucide="cpu" size="16"></i></div>
                                    <div>
                                        <span class="font-medium text-slate-900 block">Arduino UNO R3</span>
                                        <span class="text-sm text-slate-500">Microcontrolador principal ATmega328P</span>
                                    </div>
                                </li>
                                <li class="flex items-start gap-3">
                                    <div class="bg-green-100 p-1.5 rounded text-green-600 mt-0.5"><i data-lucide="zap" size="16"></i></div>
                                    <div>
                                        <span class="font-medium text-slate-900 block">Sensor de Conductividad</span>
                                        <span class="text-sm text-slate-500">Sonda anal√≥gica para medici√≥n de TDS/EC</span>
                                    </div>
                                </li>
                                <li class="flex items-start gap-3">
                                    <div class="bg-amber-100 p-1.5 rounded text-amber-600 mt-0.5"><i data-lucide="activity" size="16"></i></div>
                                    <div>
                                        <span class="font-medium text-slate-900 block">Sensor de Potasio (Nuevo)</span>
                                        <span class="text-sm text-slate-500">Electrodo selectivo de iones (ISE) experimental</span>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        
                        <div class="p-8 space-y-6">
                            <h3 class="font-semibold text-slate-800 mb-4">Software & Librer√≠as</h3>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-sm">C++</span>
                                <span class="px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-sm">Arduino IDE</span>
                                <span class="px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-sm">LiquidCrystal_I2C</span>
                                <span class="px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-sm">OneWire</span>
                            </div>
                            
                            <div class="mt-8 p-4 bg-slate-50 rounded-lg border border-slate-200">
                                <h4 class="text-sm font-bold text-slate-800 mb-2">Repositorios Oficiales</h4>
                                <div class="space-y-2">
                                    <a href="https://github.com/paupau77/Proyecto-Hugo-Medidor-de-Salinidad-con-Arduino-UNO" class="flex items-center gap-2 text-sm text-emerald-600 hover:underline">
                                        <i data-lucide="github" size="14"></i>
                                        Proyecto Principal (Salinidad)
                                    </a>
                                    <a href="https://github.com/paupau77/Proyecto-Hugo-Medidor-de-Salinidad-con-Arduino-UNO/tree/VersionAgosto2025" class="flex items-center gap-2 text-sm text-amber-600 hover:underline">
                                        <i data-lucide="github" size="14"></i>
                                        Rama Experimental (Potasio - Sep 2025 - 2026)
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-slate-300 py-12 mt-12 border-t border-slate-800">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <div class="flex justify-center items-center gap-2 mb-4">
                <i data-lucide="heart" class="text-rose-500 animate-pulse fill-current"></i>
                <span class="font-semibold text-white">Hecho con amor por Paulina Juich</span>
            </div>
            <p class="text-sm text-slate-400 max-w-2xl mx-auto mb-6">
                Dedicado a la memoria de Hugo Passucci.
         Inspirado por el amor a Agus Nicol√°s.
            </p>
            <div class="flex justify-center gap-6 text-sm">
                <a href="https://github.com/paupau77" class="hover:text-emerald-400 transition-colors flex items-center gap-1">
                    <i data-lucide="github" size="16"></i> GitHub Profile
                </a>
            </div>
            <p class="text-xs text-slate-600 mt-8">¬© 2026 Paulina Juich. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- L√≥gica de la Aplicaci√≥n -->
    <script>
        // --- Configuraci√≥n Inicial ---
        lucide.createIcons();
        let currentMode = 'salinity'; // 'salinity' or 'potassium'
        let chartInstance = null;
        
        // --- Navegaci√≥n (Tabs) ---
        function switchTab(tabId) {
            // Ocultar todos los contenidos
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            // Mostrar el seleccionado
            document.getElementById(`tab-${tabId}`).classList.remove('hidden');
            
            // Actualizar botones del men√∫ desktop
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('bg-emerald-50', 'text-emerald-700');
                btn.classList.add('text-slate-600');
            });
            const activeBtn = document.getElementById(`btn-${tabId}`);
            if(activeBtn) {
                activeBtn.classList.add('bg-emerald-50', 'text-emerald-700');
                activeBtn.classList.remove('text-slate-600');
            }

            // Cerrar men√∫ m√≥vil si est√° abierto
            document.getElementById('mobile-menu').classList.add('hidden');
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('hidden');
        }

        // --- L√≥gica del Dashboard (Modos) ---
        function setMode(mode) {
            currentMode = mode;
            const isK = mode === 'potassium';
            
            // Actualizar UI de botones
            const btnSal = document.getElementById('btn-mode-salinity');
            const btnPot = document.getElementById('btn-mode-potassium');
            const title = document.getElementById('mode-title');
            
            if (isK) {
                btnSal.className = "px-6 py-2 rounded-md text-sm font-medium transition-all duration-200 text-slate-500 hover:text-slate-700";
                btnPot.className = "px-6 py-2 rounded-md text-sm font-medium transition-all duration-200 bg-white shadow-sm text-amber-600 flex items-center gap-2";
                title.innerText = "Potasio (K+)";
                title.className = "text-amber-500 transition-colors duration-500";
                document.getElementById('lcd-label').innerText = "K+ ION:";
                document.getElementById('lcd-status').innerText = ">> MIDIENDO K+ <<";
                document.getElementById('chart-title-text').innerText = "Potasio";
                document.getElementById('analysis-text').innerText = "Monitoreo de electrolitos activo (Rama Experimental Agosto 2025). Los valores de Potasio se encuentran dentro del rango esperado.";
            } else {
                btnSal.className = "px-6 py-2 rounded-md text-sm font-medium transition-all duration-200 bg-white shadow-sm text-emerald-700";
                btnPot.className = "px-6 py-2 rounded-md text-sm font-medium transition-all duration-200 text-slate-500 hover:text-slate-700 flex items-center gap-2";
                title.innerText = "Salinidad";
                title.className = "text-emerald-600 transition-colors duration-500";
                document.getElementById('lcd-label').innerText = "SALINIDAD:";
                document.getElementById('lcd-status').innerText = ">> SISTEMA OK <<";
                document.getElementById('chart-title-text').innerText = "Conductividad";
                document.getElementById('analysis-text').innerText = "La conductividad el√©ctrica muestra estabilidad. Compensaci√≥n de temperatura activa a 25¬∞C.";
            }

            // Reiniciar gr√°fico con nuevo color y datos
            initChart(isK);
        }

        // --- Gr√°ficos con Chart.js ---
        function initChart(isPotassium) {
            const ctx = document.getElementById('mainChart').getContext('2d');
            const color = isPotassium ? '#f59e0b' : '#10b981'; // Amber vs Emerald
            const gradient = ctx.createLinearGradient(0, 0, 0, 300);
            gradient.addColorStop(0, isPotassium ? 'rgba(245, 158, 11, 0.3)' : 'rgba(16, 185, 129, 0.3)');
            gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');

            if (chartInstance) {
                chartInstance.destroy();
            }

            // Datos iniciales vac√≠os
            const initialData = Array(20).fill(null);
            const initialLabels = Array(20).fill('');

            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: initialLabels,
                    datasets: [{
                        label: isPotassium ? 'Potasio (mM)' : 'Conductividad (uS)',
                        data: initialData,
                        borderColor: color,
                        backgroundColor: gradient,
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: false,
                    interaction: { intersect: false, mode: 'index' },
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { display: false },
                        y: { 
                            display: true,
                            grid: { color: '#f1f5f9' },
                            suggestedMin: isPotassium ? 3 : 1000,
                            suggestedMax: isPotassium ? 6 : 1400
                        }
                    }
                }
            });
        }

        // --- Simulaci√≥n de Datos en Tiempo Real ---
        setInterval(() => {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('es-AR', { hour12: false, minute: '2-digit', second: '2-digit' });
            
            // Generar valores aleatorios
            const ec = (1200 + Math.random() * 100 - 50).toFixed(0);
            const ph = (7.0 + Math.random() * 0.4 - 0.2).toFixed(2);
            const temp = (24 + Math.random() * 1 - 0.5).toFixed(1);
            const k = (4.5 + Math.random() * 0.8 - 0.4).toFixed(2);

            // Actualizar DOM (Pantalla LCD y Sensores)
            const isK = currentMode === 'potassium';
            document.getElementById('lcd-value').innerText = isK ? `${k} mM` : `${ec} uS`;
            document.getElementById('lcd-temp').innerText = `${temp} C`;
            document.getElementById('lcd-ph').innerText = ph;
            document.getElementById('card-temp').innerText = `${temp}¬∞`;
            document.getElementById('card-ph').innerText = ph;

            // Actualizar Gr√°fico
            if (chartInstance) {
                const val = isK ? k : ec;
                
                // Mover datos (efecto deslizante)
                const dataArr = chartInstance.data.datasets[0].data;
                const labelsArr = chartInstance.data.labels;
                
                dataArr.push(val);
                labelsArr.push(timeStr);
                
                if (dataArr.length > 20) {
                    dataArr.shift();
                    labelsArr.shift();
                }
                
                chartInstance.update();
            }

        }, 1000);

        // --- Inicializaci√≥n ---
        window.onload = function() {
            initChart(false);
        };
// ===============================
// APAGADO FORZADO TEMP / pH EN K+
// ===============================

setInterval(() => {
  if (mode === "potassium") {
    // Oculta TODO lo que huela a temperatura o pH
    document.querySelectorAll(
      '[id*="temp"], [class*="temp"], [id*="ph"], [class*="ph"]'
    ).forEach(el => {
      el.style.display = "none";
    });
  } else {
    // En salinidad, vuelve a mostrar todo
    document.querySelectorAll(
      '[id*="temp"], [class*="temp"], [id*="ph"], [class*="ph"]'
    ).forEach(el => {
      el.style.display = "";
    });
  }
}, 300);
    </script>
</body>
</html>